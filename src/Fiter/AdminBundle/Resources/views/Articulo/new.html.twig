{% extends '::admin.html.twig' %}
 
{% block title %}Añadir artículo{% endblock %}

{% block main %}
<article>
    <header>
       <h2>Añadir artículo</h2>
    </header>
    <form id="form_add_articulo" action="{{ path('admin_articulo_create') }}" method="post" {{ form_enctype(form) }}>
        {{ form_errors(form) }}  
            
        {{ form_label(form.titulo) }}
        {{ form_widget(form.activo) }}<span>{{ form_label(form.activo,label|default(null)) }}</span><br>
        {{ form_widget(form.titulo) }}
        
        {{ form_row(form.categoria) }}
        
        <img id="blah" src="/img/vacio.png" alt="your image" />
        {{ form_label(form.imagen) }}      
        {{ form_widget(form.mostrarImagen) }}<span>{{ form_label(form.mostrarImagen,label|default(null)) }}</span><br>
        {{ form_widget(form.imagen) }}
            
        {{ form_row(form.contenido) }}
        
        {{ form_label(form.videosYoutube) }}
        <ul class="videosYoutube" data-prototype="{{ form_widget(form.videosYoutube.vars.prototype)|e }}">
            {% for videoYoutube in form.videosYoutube %}
                <li>{{ form_row(videoYoutube.enlace) }}</li>
            {% endfor %}
        </ul>
            
            
        {{ form_label(form.listasYoutube) }}
        <ul class="listasYoutube" data-prototype="{{ form_widget(form.listasYoutube.vars.prototype)|e }}">
            {% for listaYoutube in form.listasYoutube %}
                <li>{{ form_row(listaYoutube.enlace) }}</li>
            {% endfor %}
        </ul>    
        
        {{ form_row(form.canalYoutube) }}
            
            
        {{ form_rest(form) }}
    </form>
    <button  id="form_add_articulo_submit" form="form_add_articulo" type="submit">Añadir</button>
    <a class="boton" href="{{ path('admin_articulo') }}">Volver</a>
</article>
{% endblock %}

{% block javascripts %}
<script src="/js/chosen/chosen.jquery.js"></script>
<script type="text/javascript"> 
    $("#fiter_adminbundle_articulotype_categoria").chosen();
    $('#fiter_adminbundle_articulotype_categoria_chzn').css('width','100%');
    $('.chzn-drop').css('width','100%');
    $('.chzn-search input').css('width','100%');
    
    $("#fiter_adminbundle_articulotype_categoria").data("chosen").default_text = "Selecciona categorías..";
    $("#fiter_adminbundle_articulotype_categoria").trigger("liszt:updated");
    $("li.search-field input").css("width","auto");
</script>
<link rel="stylesheet" href="/js/chosen/chosen.css" />
<style>
        #fiter_adminbundle_articulotype_categoria{width: 100%;}
        #fiter_adminbundle_articulotype_categoria_chzn{width: 100%;}
</style>


<script type="text/javascript" src="/js/formoid/jquery.uniform.min.js"></script>
<script type="text/javascript"> 
    $("form").find("input[type=file]").uniform();
    $("form").find("input[type=file]").change(function() {
        readURL(this)
    });
    $(".uploader span.filename").text("No se ha seleccionado ningún archivo");
    $(".uploader span.action").text("Seleccionar");
    
    $("#form_add_articulo").submit(function(e){
        //e.preventDefault();
        var inputsVideosYoutube = $('.videosYoutube input');
        var removeVideosYoutube = $('.videosYoutube a.remove_tag_link');
        for (var i=0;i<inputsVideosYoutube.size();i++){ 
            if(inputsVideosYoutube.get(i).value.length==0){
                removeVideosYoutube.trigger('click');
            }
        }
    
        var inputsVideosYoutube2 = $('.listasYoutube input');
        var removeVideosYoutube2 = $('.listasYoutube a.remove_tag_link');
        for (var i=0;i<inputsVideosYoutube2.size();i++){ 
            if(inputsVideosYoutube2.get(i).value.length==0){
                removeVideosYoutube2.trigger('click');
            }
        }
        //$(this).submit();
    });
</script>
{% endblock %}