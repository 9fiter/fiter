{% extends '::admin.html.twig' %}
 
{% block title %}Editar medio{% endblock %}
 
{% block main %}
    <h2>Editar medio</h2>

    <form id="form_update_medio" action="{{ path('admin_medio_update', { 'id': entity.id, 'slug': entity.slug  }) }}" method="post" {{ form_enctype(edit_form) }}>
        {{ form_errors(edit_form) }}  
            
        {{ form_label(edit_form.titulo) }}
        {{ form_widget(edit_form.activo) }}<span>{{ form_label(edit_form.activo,label|default(null)) }}</span><br>
        {{ form_widget(edit_form.titulo) }}
        
        {{ form_row(edit_form.categoria) }}
        
        
        {% if edit_form.vars.value.path %}
            <img id="blah" src="/uploads/medios/{{ edit_form.vars.value.path }}" alt="your image" />
        {% else %}
            <img id="blah" src="/img/vacio.png" alt="your image" />
        {% endif %}<br/> 
        {{ form_label(edit_form.imagen) }}     
        {{ form_widget(edit_form.mostrarImagen) }}<span>{{ form_label(edit_form.mostrarImagen,label|default(null)) }}</span><br>
        {{ form_widget(edit_form.imagen) }}  
        
        
        {{ form_row(edit_form.contenido) }}
        
        {{ form_row(edit_form.rss) }}
        {{ form_row(edit_form.twitter) }}
        
        {{ form_label(edit_form.videosYoutube) }}
        <ul class="videosYoutube" data-prototype="{{ form_widget(edit_form.videosYoutube.vars.prototype)|e }}">
            {% for videoYoutube in edit_form.videosYoutube %}
                <li>{{ form_row(videoYoutube.enlace) }}</li>
            {% endfor %}
        </ul>   
        
        {{ form_label(edit_form.listasYoutube) }}
        <ul class="listasYoutube" data-prototype="{{ form_widget(edit_form.listasYoutube.vars.prototype)|e }}">
            {% for listaYoutube in edit_form.listasYoutube %}
                <li>{{ form_row(listaYoutube.enlace) }}</li>
            {% endfor %}
        </ul>    
          {{ form_row(edit_form.canalYoutube) }}  
        
        {{ form_row(edit_form._token) }} 
        
        {#{ form_rest(edit_form) }#}
    </form>
    <form id="form_delete_medio" action="{{ path('admin_medio_delete', { 'id': entity.id }) }}" method="post">
        {{ form_widget(delete_form) }}
    </form>
    
    <button form="form_update_medio" type="submit">Guardar</button>
    <button form="form_delete_medio" type="submit">Eliminar</button>
    <a class="boton" href="{{ path('admin_medio') }}">Volver</a>
{% endblock %}
    
{% block javascripts %}
<script src="/js/chosen/chosen.jquery.js"></script>
<script type="text/javascript"> 
    $("#fiter_defaultbundle_mediotype_categoria").chosen();
    $('#fiter_defaultbundle_mediotype_categoria_chzn').css('width','100%');
    $('.chzn-drop').css('width','100%');
    $('.chzn-search input').css('width','100%');
    
    $("#fiter_defaultbundle_mediotype_categoria").data("chosen").default_text = "Selecciona categorías..";
    $("#fiter_defaultbundle_mediotype_categoria").trigger("liszt:updated");
    $("li.search-field input").css("width","auto");
</script>
<link rel="stylesheet" href="/js/chosen/chosen.css" />
<style>
        #fiter_defaultbundle_mediotype_categoria{width: 100%;}
        #fiter_defaultbundle_mediotype_categoria_chzn{width: 100%;}
</style>

<script type="text/javascript" src="/js/formoid/jquery.uniform.min.js"></script>
<script type="text/javascript"> 
    $("form").find("input[type=file]").uniform();
    $("form").find("input[type=file]").change(function() {
        readURL(this)
    });
    $(".uploader span.filename").text("No se ha seleccionado ningún archivo");
    $(".uploader span.action").text("Seleccionar");
</script>
{% endblock %}    

{% block listaMasVistos %}
    <header><h3 id="listaMasVistos">Más vistos</h3></header>
    {% render 'FiterDefaultBundle:Medio:listaMasVistos' %}
    <br/>
{% endblock %}    
    
{% block listaMasValorados %}
    <header><h3 id="listaMasValorados">Más valorados</h3></header>
    {% render 'FiterDefaultBundle:Medio:listaMasValorados' %}
    <br/>
{% endblock %} 
    
{% block asideL %}
    {% render 'FiterDefaultBundle:Categoria:menu' with {'slug': "inicio", 'tipo' : 'medio'} %}
{% endblock %}   