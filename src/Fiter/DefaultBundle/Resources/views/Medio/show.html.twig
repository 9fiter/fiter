{% extends '::base.html.twig' %}
	 
{% block title %}Medio{% endblock %}

{% block main %}
<article>
    <header>
        <h3><a href="{{ path('medio_show', { 'id': entity.id, 'slug': entity.slug }) }}">{{ entity.titulo }}</a></h3>
        {% include 'FiterDefaultBundle:Medio:parcial/datos.html.twig' with {'entity': entity} %}
    </header>
       
    {% if entity.path and entity.mostrarImagen %}
        <img src="{{ asset(['uploads/medios/', entity.path]|join) }}" alt="{{ entity.titulo}}" class="imgMedio" />
    {% endif %}
        
    <div style="clear: both"></div>
    {% if entity.mostrarContenido %}
        <div>{{ entity.contenido|raw }}</div>
        <div style="clear: both"></div>
    {% endif %}
    
    <div class="share_buttons"> 
        <h4>Compartir en:</h4><br/>
        <a target="_blank" href="http://www.facebook.com/sharer.php?s=100&amp;p[url]={{ path('medio_show', { 'id': entity.id, 'slug': entity.slug }) }}&amp;p[title]={{ entity.titulo }}&amp;p[summary]={{ entity.contenido|raw|striptags }}&amp;p[images][0]={{ asset(['uploads/documents/', entity.path]|join) }}"><div class="social_facebook"></div></a>
        <a target="_blank" href="http://twitter.com/home?status=#url"><div class="social_twitter"></div></a>
        <a target="_blank" href="https://plusone.google.com/_/+1/confirm?hl=en&url=#{{ path('medio_show', { 'id': entity.id, 'slug': entity.slug }) }}"><div class="social_google"></div></a>
    </div>
    
    {% if entity.videosYoutube or entity.canalYoutube or entity.listasYoutube %}
        <div id="my-widget1"></div>
    {% endif %} 
        
    {% if entity.twitter %}
        <div id="twitter"></div> 
    {% endif %}     
       
    {% if entity.rss %}    
        <div id="rss"></div>
    {% endif %} 
    
        <div id="images"></div>
    
    <div class="comentarios"><a href="#">Comentarios</a></div>
    {#% include 'FOSCommentBundle:Thread:async.html.twig' with {'id': entity.id } %#}
    {% include 'FOSCommentBundle:Thread:async.html.twig' with {'id': 'type_' ~ entity.id } %}

    
    <a class="boton" href="{{ path('medio') }}">Volver</a>
</article>   
{% endblock %}






{% block javascripts %}
    <script type="text/javascript" src="/js/jquery-ui.js"></script>     
    {% if entity.videosYoutube|length or entity.canalYoutube or entity.listasYoutube|length %}
        <script type="text/javascript" src="/js/jQuery.tubeplayer.js"></script>
        <script type="text/javascript" src="/js/videoSearch.js"></script>
        <script type="text/javascript" src="/js/videoSearchStr.js"></script>
        <script type="text/javascript" src="/js/ytApi.js"></script>
        
       <script>
            $(document).ready(function(){
                $( "#my-widget1" ).videoSearch({
                     {% if entity.videosYoutube|length  %}
                        videoInicial: "{{entity.videosYoutube['0'].enlace|youtube_id}}",
                     {% endif %}     
                        busquedaInicial: "{{ entity.titulo }}",
                        listaVideos: [ {% for video in entity.videosYoutube %}"{{video.enlace|youtube_id}}"{% if loop.last != loop.index %},{% endif %}{% endfor %} ],
                        listaPlaylists: [ {% for lista in entity.listasYoutube %}"{{lista.enlace|youtube_playlist_id}}"{% if loop.last != loop.index %},{% endif %}{% endfor %} ],
                        canal: "{{ entity.canalYoutube|youtube_user_id }}",
                });
            });
        </script>
    {% endif %}   
        
    {% if entity.rss %}
    <script src="/js/zrssfeed/jquery.zrssfeed.min.js" type="text/javascript"></script>   
    <script>
    $(document).ready(function(){
        $('#rss').rssfeed('{{ entity.rss }}', { 
            limit: 4,
            linktarget:'_blank',
            linkcontent:true,
            sort:'date',
            sortasc:'false',
            //titletag:'h3',
            //snippet:false,
            media:false,
            //content:false,
            //historical:true,
        });
    });
     </script>
    {% endif %}  
     
    {% if entity.twitter %}
    <script type="text/javascript">
    $(document).ready(function () {
        $('#twitter').twitterfeed('{{ entity.twitter }}',{
            limit: 7,
            //tweetname: false,
            //tweettime:false,
        },function(e) {
            $('#twitter').find('a').attr('target' , 'blank');
             
        });
        

    });
    </script>
    {% endif %}
  
    
{% endblock %}
    
    
    
    

{% block stylesheets %}
    <link rel="stylesheet" href="/css/themes/moi/jquery.ui.all.css">
    <link rel="stylesheet" href="/css/default.css">
{% endblock %}
    
    
{% block listaMasVistos %}
    <header><h3 id="listaMasVistos">Más vistos</h3></header>
    {% render 'FiterDefaultBundle:Medio:listaMasVistos' %}
    <br/>
{% endblock %}    
    
{% block listaMasValorados %}
    <header><h3 id="listaMasValorados">Más valorados</h3></header>
    {% render 'FiterDefaultBundle:Medio:listaMasValorados' %}
    <br/>
{% endblock %}     
    
    
{% block asideL %}
    {% render 'FiterDefaultBundle:Categoria:menu' with {'slug': "inicio", 'tipo' : 'medio'} %}
{% endblock %}   
    
    
 